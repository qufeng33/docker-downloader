# Docker Downloader

> ä¼ä¸šçº§è·¨å¹³å° Docker é•œåƒä¸‹è½½å·¥å…·

## 1. é¡¹ç›®æ¦‚è¿° (Project Overview)

Docker Downloader æ˜¯ä¸€ä¸ªé‡‡ç”¨ç°ä»£åŒ–æ¶æ„è®¾è®¡çš„è·¨å¹³å°æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œä¸“ä¸ºç®€åŒ– Docker é•œåƒçš„ç¦»çº¿ä¸‹è½½è€Œè®¾è®¡ã€‚åŸºäº **Electron + NestJS + Vue 3 + Element Plus** çš„æŠ€æœ¯æ ˆï¼Œä½¿ç”¨ **@doubleshot/nest-electron** å®ç°ç±»å‹å®‰å…¨çš„ IPC é€šä¿¡ï¼Œæä¾›ä¼ä¸šçº§çš„ç¨³å®šæ€§å’Œä¸“ä¸šçš„ç”¨æˆ·ä½“éªŒã€‚æ— è®ºæ˜¯å…¬æœ‰ä»“åº“ï¼ˆå¦‚ Docker Hubï¼‰è¿˜æ˜¯ç§æœ‰ä»“åº“ï¼Œéƒ½èƒ½è½»æ¾æŸ¥æ‰¾ã€ç®¡ç†å’Œä¸‹è½½ Docker é•œåƒï¼Œå¹¶å°†å…¶ä¿å­˜ä¸º `.tar.gz` æ ¼å¼ï¼Œæ–¹ä¾¿åœ¨ç¦»çº¿ç¯å¢ƒä¸­ä½¿ç”¨ `docker load -i` å‘½ä»¤å¯¼å…¥ã€‚

### ğŸ¯ æ ¸å¿ƒä»·å€¼

- **ç¦»çº¿åœºæ™¯æ”¯æŒ** - åœ¨æ²¡æœ‰ Docker ç¯å¢ƒæˆ–ç½‘ç»œå—é™çš„æƒ…å†µä¸‹ï¼Œé¢„å…ˆä¸‹è½½æ‰€éœ€é•œåƒ
- **å¤šæ¶æ„æ”¯æŒ** - æ¸…æ™°å±•ç¤ºé•œåƒæ”¯æŒçš„æ‰€æœ‰ CPU æ¶æ„ï¼ˆamd64ã€arm64 ç­‰ï¼‰
- **ç§æœ‰ä»“åº“ç®¡ç†** - ç»Ÿä¸€ç®¡ç†å¤šä¸ªç§æœ‰ä»“åº“çš„è®¿é—®å‡­è¯å’Œä¸‹è½½éœ€æ±‚
- **å¯è§†åŒ–ä¸‹è½½** - æä¾›ç›´è§‚çš„å›¾å½¢ç•Œé¢å’Œä¸‹è½½è¿›åº¦ç®¡ç†

## 2. æ ¸å¿ƒåŠŸèƒ½ (Core Features)

### 2.1. ä»“åº“ç®¡ç† (Repository Management)

- **é»˜è®¤ä»“åº“ï¼š** å†…ç½® Docker Hub (`docker.io`) ä½œä¸ºé»˜è®¤å…¬æœ‰ä»“åº“
- **ç§æœ‰ä»“åº“æ”¯æŒï¼š**
  - åœ¨è®¾ç½®é¡µé¢æ·»åŠ ã€ç¼–è¾‘å’Œåˆ é™¤ç§æœ‰ä»“åº“é…ç½®
  - å®‰å…¨å­˜å‚¨è®¿é—®å‡­è¯ï¼ˆå¯†ç /è®¿é—®ä»¤ç‰Œï¼‰
- **ä»“åº“åˆ‡æ¢ï¼š** ä¸»ç•Œé¢ä¸‹æ‹‰èœå•å¿«é€Ÿåˆ‡æ¢æ“ä½œä»“åº“

### 2.2. é•œåƒæŸ¥è¯¢ä¸æµè§ˆ (Image Discovery)

- **æ™ºèƒ½æœç´¢ï¼š** è¾“å…¥é•œåƒåç§°å¿«é€ŸæŸ¥æ‰¾ï¼ˆæ”¯æŒæ¨¡ç³Šæœç´¢ï¼‰
- **æ ‡ç­¾å±•ç¤ºï¼š** åˆ—è¡¨å½¢å¼å±•ç¤ºé•œåƒçš„æ‰€æœ‰å¯ç”¨ Tags
- **æ¶æ„ä¿¡æ¯ï¼š** æ¯ä¸ª Tag æ˜¾ç¤ºæ”¯æŒçš„ CPU æ¶æ„

### 2.3. é•œåƒä¸‹è½½ (Image Download)

- **ç²¾ç¡®ä¸‹è½½ï¼š** é€‰æ‹©å…·ä½“çš„"Tag + æ¶æ„"ç»„åˆè¿›è¡Œä¸‹è½½
- **å¹¶å‘ä¸‹è½½ï¼š** å¤šçº¿ç¨‹ä¸‹è½½ layersï¼Œæå‡ä¸‹è½½é€Ÿåº¦
- **æ ‡å‡†æ‰“åŒ…ï¼š** éµå¾ª OCI è§„èŒƒæ‰“åŒ…ä¸º `.tar.gz` æ ¼å¼
- **æ‰¹é‡ä¸‹è½½ï¼š** æ”¯æŒåŒæ—¶ä¸‹è½½å¤šä¸ªé•œåƒï¼ˆå¯é…ç½®ï¼‰
- **æ–­ç‚¹ç»­ä¼ ï¼š** å¤§æ–‡ä»¶ä¸‹è½½ä¸­æ–­åå¯ç»­ä¼ 
- **å®Œæ•´æ€§æ ¡éªŒï¼š** SHA256 æ ¡éªŒç¡®ä¿æ–‡ä»¶å®Œæ•´æ€§

### 2.4. ä¸‹è½½ç®¡ç† (Download Management)

- **ä»»åŠ¡é˜Ÿåˆ—ï¼š** ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ä¸‹è½½ä»»åŠ¡çŠ¶æ€
- **å®æ—¶è¿›åº¦ï¼š** æ˜¾ç¤ºä¸‹è½½è¿›åº¦ã€é€Ÿåº¦ã€å‰©ä½™æ—¶é—´
- **ä»»åŠ¡æ§åˆ¶ï¼š** æ”¯æŒæš‚åœã€ç»§ç»­ã€å–æ¶ˆæ“ä½œ
- **ä»»åŠ¡æŒä¹…åŒ–ï¼š** åº”ç”¨é‡å¯åæ¢å¤æœªå®Œæˆä»»åŠ¡
- **å¹¶å‘æ§åˆ¶ï¼š** å¯é…ç½®æœ€å¤§åŒæ—¶ä¸‹è½½æ•°
- **é€Ÿåº¦é™åˆ¶ï¼š** é¿å…å ç”¨å…¨éƒ¨ç½‘ç»œå¸¦å®½

### 2.5. é…ç½®ç®¡ç† (Configuration Management)

- **ä¸‹è½½è®¾ç½®ï¼š** å¹¶å‘æ•°ã€æ‰¹é‡ä¸‹è½½ã€é»˜è®¤è·¯å¾„ã€é™é€Ÿé…ç½®
- **ç•Œé¢è®¾ç½®ï¼š** ä¸»é¢˜åˆ‡æ¢ï¼ˆæµ…è‰²/æ·±è‰²/è·Ÿéšç³»ç»Ÿï¼‰ã€è¯­è¨€è®¾ç½®
- **ç½‘ç»œè®¾ç½®ï¼š** è¶…æ—¶æ—¶é—´ã€é‡è¯•æ¬¡æ•°ã€ä»£ç†æœåŠ¡å™¨é…ç½®
- **é…ç½®æŒä¹…åŒ–ï¼š** æ‰€æœ‰è®¾ç½®è‡ªåŠ¨ä¿å­˜

## 3. æŠ€æœ¯æ¶æ„ (Technical Architecture)

### 3.1. ç°ä»£åŒ–æŠ€æœ¯æ ˆ

æœ¬é¡¹ç›®é‡‡ç”¨ä¸šç•Œé¢†å…ˆçš„æŠ€æœ¯æ ˆç»„åˆï¼Œç¡®ä¿ä»£ç è´¨é‡ã€å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½ï¼š

| æŠ€æœ¯æ ˆ           | ç‰ˆæœ¬   | ç”¨é€”               | ç‰¹ç‚¹                   |
| ---------------- | ------ | ------------------ | ---------------------- |
| **Electron**     | ^37.x  | è·¨å¹³å°æ¡Œé¢åº”ç”¨æ¡†æ¶ | æˆç†Ÿç¨³å®šï¼Œç”Ÿæ€ä¸°å¯Œ     |
| **NestJS**       | ^10.x  | ä¸»è¿›ç¨‹åç«¯æ¡†æ¶     | ä¼ä¸šçº§æ¶æ„ï¼Œä¾èµ–æ³¨å…¥   |
| **Vue 3**        | ^3.5.x | æ¸²æŸ“è¿›ç¨‹å‰ç«¯æ¡†æ¶   | ç»„åˆå¼ APIï¼Œæ€§èƒ½ä¼˜å¼‚   |
| **Element Plus** | ^2.x   | UI ç»„ä»¶åº“          | ä¼ä¸šçº§è®¾è®¡ï¼Œç»„ä»¶ä¸°å¯Œ   |
| **TypeScript**   | ^5.x   | å¼€å‘è¯­è¨€           | ç±»å‹å®‰å…¨ï¼Œå¼€å‘ä½“éªŒä½³   |
| **Vite**         | ^7.x   | æ„å»ºå·¥å…·           | å¿«é€Ÿçƒ­æ›´æ–°ï¼Œç°ä»£æ„å»º   |
| **pnpm**         | ^10.x  | åŒ…ç®¡ç†å™¨           | é«˜æ•ˆä¾èµ–ç®¡ç†ï¼ŒèŠ‚çœç©ºé—´ |
| **electron-log** | ^5.x   | æ—¥å¿—ç®¡ç†           | è·¨è¿›ç¨‹æ—¥å¿—ï¼Œæ–‡ä»¶è½®è½¬   |

### 3.2. æ¶æ„è®¾è®¡ç†å¿µ

**ä¼ä¸šçº§ NestJS ä¸»è¿›ç¨‹ï¼š**

- **ä¾èµ–æ³¨å…¥å®¹å™¨** - ä¼˜é›…ç®¡ç†æœåŠ¡é—´ä¾èµ–å…³ç³»ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤
- **æ¨¡å—åŒ–è®¾è®¡** - Registryã€Downloadã€Authã€Packagingã€Config ç­‰ç‹¬ç«‹æ¨¡å—
- **è£…é¥°å™¨é©±åŠ¨** - ä½¿ç”¨ `@IpcHandle()`ã€`@IpcOn()` ç­‰è£…é¥°å™¨ç®€åŒ– IPC å®šä¹‰
- **äº‹ä»¶é©±åŠ¨æ¶æ„** - åŸºäº `@nestjs/event-emitter` å¤„ç†ä¸‹è½½è¿›åº¦ç­‰å¼‚æ­¥äº‹ä»¶

**ç±»å‹å®‰å…¨ IPC é€šä¿¡ï¼š**

- **@doubleshot/nest-electron** - ä¸“ä¸º NestJS + Electron è®¾è®¡çš„ IPC è§£å†³æ–¹æ¡ˆ
- **è‡ªåŠ¨ç±»å‹ç”Ÿæˆ** - è‡ªåŠ¨ç”Ÿæˆæ¸²æŸ“è¿›ç¨‹ç±»å‹å®šä¹‰ï¼Œç¡®ä¿ç±»å‹å®‰å…¨
- **è£…é¥°å™¨ä¸€è‡´æ€§** - `@IpcHandle()` å¦‚åŒ `@Get()` ä¸€æ ·çš„å¼€å‘ä½“éªŒ
- **é›¶æ ·æ¿ä»£ç ** - æ— éœ€æ‰‹åŠ¨ç¼–å†™ IPC æ¡¥æ¥å±‚ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘

**ç°ä»£åŒ–å‰ç«¯æ¶æ„ï¼š**

- **Vue 3 ç»„åˆå¼ API** - æ›´å¥½çš„é€»è¾‘å¤ç”¨å’Œç±»å‹æ¨å¯¼
- **Element Plus** - ä¼ä¸šçº§ UI ç»„ä»¶ï¼Œå¼€ç®±å³ç”¨
- **å“åº”å¼è®¾è®¡** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸å’Œåˆ†è¾¨ç‡
- **ä¸»é¢˜ç³»ç»Ÿ** - æ”¯æŒæµ…è‰²/æ·±è‰²ä¸»é¢˜åˆ‡æ¢

### 3.3. æ¶æ„ä¼˜åŠ¿

- **å¼€å‘æ•ˆç‡æœ€å¤§åŒ–ï¼š** å……åˆ†åˆ©ç”¨ NestJS ç”Ÿæ€å’Œè£…é¥°å™¨ç‰¹æ€§ï¼Œé›¶å­¦ä¹ æˆæœ¬
- **ç±»å‹å®‰å…¨ä¿éšœï¼š** å…¨é“¾è·¯ TypeScript æ”¯æŒï¼Œç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥
- **ä¼ä¸šçº§ç¨³å®šæ€§ï¼š** æˆç†Ÿçš„æŠ€æœ¯æ ˆç»„åˆï¼Œä¹…ç»ç”Ÿäº§ç¯å¢ƒè€ƒéªŒ
- **æ‰©å±•æ€§è®¾è®¡ï¼š** æ¨¡å—åŒ–æ¶æ„æ”¯æŒå¤šçª—å£ã€Worker è¿›ç¨‹ç­‰å¤æ‚åœºæ™¯
- **ç»´æŠ¤å‹å¥½ï¼š** æ¸…æ™°çš„ä»£ç ç»„ç»‡å’Œä¾èµ–æ³¨å…¥ï¼Œä¾¿äºé•¿æœŸç»´æŠ¤

## 4. é¡¹ç›®ç»“æ„ (Project Structure)

```
docker-downloader/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                    # ä¸»è¿›ç¨‹ï¼ˆNestJSï¼‰
â”‚   â”‚   â”œâ”€â”€ modules/            # ä¸šåŠ¡æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ registry/       # ä»“åº“ç®¡ç†æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ download/       # ä¸‹è½½ç®¡ç†æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/           # è®¤è¯æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ config/         # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ packaging/      # é•œåƒæ‰“åŒ…æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ services/           # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ controllers/        # IPC æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ app.module.ts       # æ ¹æ¨¡å—
â”‚   â”‚   â””â”€â”€ main.ts             # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ renderer/               # æ¸²æŸ“è¿›ç¨‹ï¼ˆVue 3ï¼‰
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # Vue ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout/     # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ search/     # æœç´¢ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ views/          # é¡µé¢è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ composables/    # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/         # çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ types/          # ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ assets/         # é™æ€èµ„æºå’Œæ ·å¼
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ design-tokens.css  # è®¾è®¡ä»¤ç‰Œç³»ç»Ÿ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...         # å…¶ä»–æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ App.vue         # æ ¹ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ main.ts         # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ index.html          # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ preload/                # Preload è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ index.ts            # ä¸» preload è„šæœ¬
â”‚   â”‚   â””â”€â”€ index.d.ts          # ç±»å‹å£°æ˜
â”‚   â””â”€â”€ shared/                 # å…±äº«ä»£ç 
â”‚       â”œâ”€â”€ types/              # å…±äº«ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ constants/          # å¸¸é‡å®šä¹‰
â”‚       â””â”€â”€ utils/              # å…±äº«å·¥å…·å‡½æ•°
â”œâ”€â”€ build/                      # æ„å»ºèµ„æº
â”œâ”€â”€ resources/                  # åº”ç”¨èµ„æº
â”œâ”€â”€ out/                        # æ„å»ºè¾“å‡º
â”œâ”€â”€ package.json                # é¡¹ç›®é…ç½®
â”œâ”€â”€ electron.vite.config.ts     # Vite é…ç½®
â”œâ”€â”€ electron-builder.yml        # æ‰“åŒ…é…ç½®
â””â”€â”€ tsconfig.json               # TypeScript é…ç½®
```

## 5. å®‰å…¨æ€§ä¸å¯é æ€§ (Security & Reliability)

### 5.1. æ•°æ®å®‰å…¨

- **å‡­è¯åŠ å¯†ï¼š** ä½¿ç”¨æ“ä½œç³»ç»Ÿçº§å®‰å…¨å­˜å‚¨ï¼ˆKeychainã€Credential Managerï¼‰
- **è¾“å…¥éªŒè¯ï¼š** ä¸¥æ ¼éªŒè¯é•œåƒåç§°ã€URL æ ¼å¼ï¼Œé˜²æ­¢æ³¨å…¥æ”»å‡»
- **HTTPS æ”¯æŒï¼š** æ”¯æŒè¯ä¹¦éªŒè¯å’Œè‡ªç­¾åè¯ä¹¦å¤„ç†

### 5.2. é”™è¯¯å¤„ç†

- **ç½‘ç»œå®¹é”™ï¼š** è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼ŒæŒ‡æ•°é€€é¿ç­–ç•¥
- **æ–‡ä»¶æ ¡éªŒï¼š** SHA256 å®Œæ•´æ€§éªŒè¯ï¼ŒæŸåæ–‡ä»¶è‡ªåŠ¨é‡ä¸‹
- **ç”¨æˆ·å‹å¥½ï¼š** æ¸…æ™°çš„é”™è¯¯æç¤ºå’Œæ¢å¤å»ºè®®

### 5.3. æ—¥å¿—ç³»ç»Ÿ

- **ä¼ä¸šçº§æ—¥å¿—ï¼š** åŸºäº electron-log çš„è·¨è¿›ç¨‹æ—¥å¿—ç®¡ç†
- **åˆ†çº§æ—¥å¿—ï¼š** ERRORã€WARNã€INFOã€DEBUG å››çº§æ—¥å¿—
- **æ–‡ä»¶è½®è½¬ï¼š** è‡ªåŠ¨æ—¥å¿—æ–‡ä»¶è½®è½¬å’Œå¤§å°æ§åˆ¶
- **è·¨è¿›ç¨‹æ”¯æŒï¼š** ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ç»Ÿä¸€æ—¥å¿—è¾“å‡º
- **éšç§ä¿æŠ¤ï¼š** æ•æ„Ÿä¿¡æ¯ä¸è®°å½•åˆ°æ—¥å¿—
- **é—®é¢˜æ’æŸ¥ï¼š** æä¾›æ—¥å¿—æŸ¥çœ‹ç•Œé¢å’Œå¯¼å‡ºåŠŸèƒ½

## 6. ç”¨æˆ·ä½“éªŒ (User Experience)

### 6.1. ç•Œé¢è®¾è®¡

- **ä¼ä¸šçº§ UIï¼š** åŸºäº Element Plus çš„ä¸“ä¸šç•Œé¢è®¾è®¡
- **ä¸»é¢˜æ”¯æŒï¼š** æµ…è‰²/æ·±è‰²ä¸»é¢˜ï¼Œè·Ÿéšç³»ç»Ÿè®¾ç½®
- **å“åº”å¼å¸ƒå±€ï¼š** é€‚é…ä¸åŒå±å¹•å°ºå¯¸å’Œåˆ†è¾¨ç‡

### 6.2. æ“ä½œä½“éªŒ

- **æ‹–æ‹½æ”¯æŒï¼š** æ–‡ä»¶æ‹–æ‹½åˆ°æŒ‡å®šä½ç½®
- **æ‰¹é‡æ“ä½œï¼š** å¤šé€‰é•œåƒæ‰¹é‡ä¸‹è½½
- **æ‰˜ç›˜æœ€å°åŒ–ï¼š** åå°ä¸‹è½½ä¸å¹²æ‰°å·¥ä½œ

### 6.3. æ€§èƒ½ä¼˜åŒ–

- **è™šæ‹Ÿæ»šåŠ¨ï¼š** Element Plus è™šæ‹ŸåŒ–ç»„ä»¶å¤„ç†å¤§é‡æ•°æ®
- **æ‡’åŠ è½½ï¼š** æŒ‰éœ€åŠ è½½ç»„ä»¶å’Œæ•°æ®
- **æ™ºèƒ½ç¼“å­˜ï¼š** å‡å°‘é‡å¤ç½‘ç»œè¯·æ±‚

## 7. å¼€å‘æŒ‡å— (Development Guide)

### 7.1. ç¯å¢ƒè¦æ±‚

| å·¥å…·        | ç‰ˆæœ¬è¦æ±‚  | è¯´æ˜                       |
| ----------- | --------- | -------------------------- |
| **Node.js** | >= 22.0.0 | JavaScript è¿è¡Œæ—¶ç¯å¢ƒ      |
| **pnpm**    | >= 10.0.0 | é«˜æ•ˆçš„åŒ…ç®¡ç†å™¨             |
| **Git**     | >= 2.0.0  | ç‰ˆæœ¬æ§åˆ¶å·¥å…·               |
| **Python**  | >= 3.8    | ç”¨äº node-gyp ç¼–è¯‘åŸç”Ÿæ¨¡å— |

### 7.2. å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
pnpm dev

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# ä»£ç æ ¼å¼åŒ–
pnpm format

# ä»£ç æ£€æŸ¥
pnpm lint

# æ„å»ºåº”ç”¨
pnpm build

# é¢„è§ˆæ„å»ºç»“æœ
pnpm start

# æ‰“åŒ…åº”ç”¨ï¼ˆå„å¹³å°ï¼‰
pnpm build:win    # Windows
pnpm build:mac    # macOS
pnpm build:linux  # Linux
```

### 7.3. æ ¸å¿ƒå®ç°è¦ç‚¹

#### 7.3.1. NestJS ä¸»è¿›ç¨‹æ¶æ„

```typescript
// src/main/app.module.ts
import { Module } from '@nestjs/common'
import { ElectronModule } from '@doubleshot/nest-electron'
import { RegistryModule } from './modules/registry/registry.module'
import { DownloadModule } from './modules/download/download.module'

@Module({
  imports: [
    ElectronModule.registerAsync({
      useFactory: async () => {
        const win = new BrowserWindow({
          width: 1200,
          height: 800,
          webPreferences: {
            preload: join(__dirname, '../preload/index.js'),
            sandbox: false
          }
        })

        if (is.dev) {
          win.loadURL(process.env['ELECTRON_RENDERER_URL'])
        } else {
          win.loadFile(join(__dirname, '../renderer/index.html'))
        }

        return win
      }
    }),
    RegistryModule,
    DownloadModule
  ]
})
export class AppModule {}
```

#### 7.3.2. IPC æ§åˆ¶å™¨ç¤ºä¾‹

```typescript
// src/main/controllers/registry.controller.ts
import { Controller } from '@nestjs/common'
import { IpcHandle, IpcOn } from '@doubleshot/nest-electron'
import { Payload } from '@nestjs/microservices'

@Controller('registry')
export class RegistryController {
  @IpcHandle('search-images')
  async searchImages(@Payload() query: string): Promise<ImageInfo[]> {
    // æœç´¢é•œåƒé€»è¾‘
    return await this.registryService.searchImages(query)
  }

  @IpcHandle('get-image-tags')
  async getImageTags(@Payload() imageName: string): Promise<TagInfo[]> {
    // è·å–é•œåƒæ ‡ç­¾é€»è¾‘
    return await this.registryService.getImageTags(imageName)
  }

  @IpcOn('download-image')
  async downloadImage(@Payload() downloadRequest: DownloadRequest): Promise<void> {
    // ä¸‹è½½é•œåƒé€»è¾‘
    await this.downloadService.startDownload(downloadRequest)
  }
}
```

#### 7.3.3. æ¸²æŸ“è¿›ç¨‹ API è°ƒç”¨

```typescript
// src/renderer/src/services/api.ts
export const registryApi = {
  searchImages: (query: string): Promise<ImageInfo[]> =>
    window.electron.ipcRenderer.invoke('registry/search-images', query),

  getImageTags: (imageName: string): Promise<TagInfo[]> =>
    window.electron.ipcRenderer.invoke('registry/get-image-tags', imageName),

  downloadImage: (request: DownloadRequest): void =>
    window.electron.ipcRenderer.send('registry/download-image', request)
}
```

## 8. è´¡çŒ®æŒ‡å— (Contributing)

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript å¼€å‘
- éµå¾ª ESLint é…ç½®
- ç¼–å†™å•å…ƒæµ‹è¯•
- ä¸­æ–‡æ³¨é‡Š

## 9. è®¸å¯è¯ (License)

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## 10. è”ç³»æ–¹å¼ (Contact)

- **ä½œè€…é‚®ç®±ï¼š** qufeng33@hotmail.com
- **é—®é¢˜åé¦ˆï¼š** æ¬¢è¿é€šè¿‡é‚®ä»¶åé¦ˆé—®é¢˜å’Œå»ºè®®

---

**å¼€å‘è¯­è¨€ï¼š** TypeScript | **äº¤æµè¯­è¨€ï¼š** ä¸­æ–‡ | **ä»£ç æ³¨é‡Šï¼š** ä¸­æ–‡
